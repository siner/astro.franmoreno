---
import SwitchDark from './elements/switchDark'
---

<header class="container mx-auto px-4 py-6 relative z-50">
  <nav
    class="flex justify-between items-center backdrop-blur-sm bg-white/30 dark:bg-[#333333]/30 rounded-2xl p-4 shadow-sm"
  >
    <a href="/" class="flex items-center gap-2">
      <span
        class="text-2xl md:text-3xl font-extrabold tracking-tight bg-gradient-to-r from-gray-900 to-gray-600 dark:from-gray-100 dark:to-gray-400 bg-clip-text text-transparent"
      >
        Fran Moreno
      </span>
    </a>

    <!-- Menú desktop -->
    <div class="items-center space-x-8 hidden md:!flex">
      <ul class="flex items-center space-x-8">
        <li>
          <a
            class="font-semibold hover:text-gray-600 dark:hover:text-gray-300 transition-colors relative group"
            href="/blog"
          >
            Blog
            <span
              class="absolute -bottom-1 left-0 w-0 h-0.5 bg-current transition-all group-hover:w-full"
            ></span>
          </a>
        </li>
        <li>
          <a
            class="font-semibold hover:text-gray-600 dark:hover:text-gray-300 transition-colors relative group"
            href="https://cv.franmoreno.com"
            target="_blank"
          >
            CV
            <span
              class="absolute -bottom-1 left-0 w-0 h-0.5 bg-current transition-all group-hover:w-full"
            ></span>
          </a>
        </li>
      </ul>
      <div>
        <SwitchDark client:only="react" />
      </div>
    </div>

    <!-- Botón menú móvil -->
    <button
      id="menu-toggle"
      class="md:hidden flex items-center justify-center w-8 h-8 text-gray-700 dark:text-gray-300"
      aria-label="Abrir menú"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </nav>
</header>

<!-- Menú móvil overlay -->
<div
  id="mobile-menu"
  class="hidden md:hidden fixed inset-0 bg-white dark:bg-gray-900"
  style="z-index: 9999;"
>
  <div class="container mx-auto px-4 py-6">
    <div class="flex justify-end">
      <button
        id="close-menu"
        class="flex items-center justify-center w-8 h-8 text-gray-700 dark:text-gray-300"
        aria-label="Cerrar menú"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div class="flex flex-col items-center justify-center h-[80vh]">
      <ul class="flex flex-col items-center space-y-8 text-xl">
        <li>
          <a
            class="font-semibold hover:text-gray-600 dark:hover:text-gray-300 transition-colors"
            href="/blog"
          >
            Blog
          </a>
        </li>
        <li>
          <a
            class="font-semibold hover:text-gray-600 dark:hover:text-gray-300 transition-colors"
            href="https://cv.franmoreno.com"
            target="_blank"
          >
            CV
          </a>
        </li>
        <li class="mt-8">
          <SwitchDark client:only="react" />
        </li>
      </ul>
    </div>
  </div>
</div>

<script>
  const menuToggle = document.getElementById('menu-toggle')
  const closeMenu = document.getElementById('close-menu')
  const mobileMenu = document.getElementById('mobile-menu')

  function openMenu() {
    mobileMenu?.classList.remove('hidden')
    document.body.classList.add('overflow-hidden')
  }

  function closeMenuHandler() {
    mobileMenu?.classList.add('hidden')
    document.body.classList.remove('overflow-hidden')
  }

  menuToggle?.addEventListener('click', openMenu)
  closeMenu?.addEventListener('click', closeMenuHandler)

  // Cerrar menú al hacer click en un enlace
  const menuLinks = mobileMenu?.querySelectorAll('a')
  menuLinks?.forEach((link) => {
    link.addEventListener('click', closeMenuHandler)
  })

  // Cerrar menú si se redimensiona la pantalla a desktop
  window.addEventListener('resize', () => {
    if (window.innerWidth >= 768) {
      closeMenuHandler()
    }
  })
</script>
