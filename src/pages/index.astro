---
import Layout from '../layouts/Layout.astro'
import Project from '../components/project.astro'
import Post from '../components/post.astro'
import Stack from '../components/stack.astro'
import HeroSection from '../components/HeroSection.astro'
import CalendarScript from '../components/CalendarScript.astro'
import { Image } from 'astro:assets'

import { getCollection } from 'astro:content'
import { getFeaturedProducts } from '../data/products'

const posts = await getCollection('blog')
const featuredProducts = getFeaturedProducts()

posts.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime())
---

<Layout
  title="Fran Moreno - Desarrollador Web"
  description="Web de Fran Moreno, Desarrollador Web"
>
  <HeroSection />

  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="mx-auto max-w-2xl lg:max-w-none py-16 sm:py-24">
      <div class="space-y-4">
        <div
          class="flex flex-col md:flex-row items-start md:items-center justify-between"
        >
          <h2 class="text-3xl font-bold tracking-tight sm:text-4xl">
            Últimos artículos
          </h2>
          <a
            href="/blog"
            class="text-sm font-semibold leading-6 text-indigo-600 dark:text-indigo-300 hover:text-indigo-500 dark:hover:text-indigo-200 transition-colors"
          >
            Ver todos <span aria-hidden="true">→</span>
          </a>
        </div>
        <p class="text-lg text-gray-600 dark:text-gray-300">
          Explora mis últimas publicaciones sobre desarrollo web, tecnología y
          experiencias.
        </p>
      </div>

      <div class="mt-10">
        <div class="grid gap-8 sm:grid-cols-2">
          {
            posts
              .slice(0, 2)
              .map((post) => (
                <Post
                  url={'/blog/' + post.slug}
                  heroImage={post.data.heroImage}
                  heroAlt={post.data.altImage}
                  title={post.data.title}
                  date={post.data.pubDate}
                  tags={post.data.tags}
                />
              ))
          }
        </div>
      </div>
    </div>

    <div class="mx-auto max-w-2xl lg:max-w-none py-16 sm:py-24">
      <div class="space-y-4">
        <h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Proyectos</h2>
        <p class="text-lg text-gray-600 dark:text-gray-300">
          Una selección de mis proyectos personales y profesionales.
        </p>
      </div>

      <div class="mt-10 grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
        <Project
          title="Mi web"
          github="https://github.com/siner/astro.franmoreno"
        >
          <p>
            Esta web, hecha con el framework <a
              class="font-bold hover:text-indigo-600 dark:hover:text-indigo-300 transition-colors"
              href="https://astro.build"
              target="_blank"
            >
              Astro
            </a>
          </p>
        </Project>

        <Project
          title="Torneos Poker Live"
          github="https://github.com/siner/nextjs.torneospokerlive"
          url="https://torneospokerlive.com"
        >
          <p>
            Web informativa sobre torneos de Poker en vivo en todos los casinos
            de España, desarrollada con el framework <a
              class="font-bold hover:text-indigo-600 dark:hover:text-indigo-300 transition-colors"
              href="https://nextjs.org/"
              target="_blank"
            >
              NextJS
            </a> y <a
              class="font-bold hover:text-indigo-600 dark:hover:text-indigo-300 transition-colors"
              href="https://supabase.com"
              target="_blank"
            >
              Supabase
            </a> como backend.
          </p>
        </Project>

        <Project
          title="Reloj de Poker"
          github="https://github.com/siner/nextjs.pokerclock"
          url="https://reloj.torneospokerlive.com/"
        >
          <p>
            Reloj para organizar torneos de poker en casa o con amigos, te
            permite definir la estructura de ciegas, el tiempo, los premios,
            etc... Desarrollado usando <a
              class="font-bold hover:text-indigo-600 dark:hover:text-indigo-300 transition-colors"
              href="https://nextjs.org/"
              target="_blank"
            >
              NextJS
            </a>
          </p>
        </Project>

        <Project
          title="Blocks - Generador HTML"
          url="https://blocks.franmoreno.com"
        >
          <p>
            Herramienta que utiliza IA para generar bloques HTML con <a
              class="font-bold hover:text-indigo-600 dark:hover:text-indigo-300 transition-colors"
              href="https://tailwindcss.com"
              target="_blank"
            >
              Tailwind CSS
            </a>. Describe lo que necesitas y obtén código listo para usar.
          </p>
        </Project>
      </div>
    </div>
  </div>

  <!-- Productos Destacados Section -->
  <div
    class="mx-auto max-w-7xl px-6 lg:px-8 py-16 sm:py-24 bg-gray-50 dark:bg-gray-900/50"
  >
    <div class="mx-auto max-w-2xl lg:max-w-none">
      <div class="space-y-4">
        <div
          class="flex flex-col md:flex-row items-start md:items-center justify-between"
        >
          <h2 class="text-3xl font-bold tracking-tight sm:text-4xl">
            Productos Digitales
          </h2>
          <a
            href="/productos"
            class="text-sm font-semibold leading-6 text-indigo-600 dark:text-indigo-300 hover:text-indigo-500 dark:hover:text-indigo-200 transition-colors"
          >
            Ver todos <span aria-hidden="true">→</span>
          </a>
        </div>
        <p class="text-lg text-gray-600 dark:text-gray-300">
          Herramientas y recursos digitales para mejorar tu productividad y
          organización personal.
        </p>
      </div>

      <div class="mt-10">
        <div class="space-y-8">
          {
            featuredProducts.map((product, index) => (
              <div class="relative overflow-hidden rounded-2xl bg-white dark:bg-gray-800 shadow-lg ring-1 ring-gray-200 dark:ring-gray-700 p-8">
                <div class="absolute top-4 right-4 z-10">
                  <span class="inline-flex items-center rounded-full bg-indigo-600 px-3 py-1 text-xs font-medium text-white">
                    {product.price === 'Gratis' ? 'Gratis' : 'Nuevo'}
                  </span>
                </div>

                <div class="grid gap-8 lg:grid-cols-2 lg:gap-12">
                  <div>
                    <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
                      {product.title}
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-6">
                      {product.description}
                    </p>

                    <div class="space-y-3 mb-6">
                      {product.features.slice(0, 3).map((feature) => (
                        <div class="flex items-center text-sm text-gray-600 dark:text-gray-300">
                          <svg
                            class="h-4 w-4 text-indigo-600 dark:text-indigo-400 mr-2"
                            fill="currentColor"
                            viewBox="0 0 20 20"
                          >
                            <path
                              fill-rule="evenodd"
                              d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                              clip-rule="evenodd"
                            />
                          </svg>
                          {feature}
                        </div>
                      ))}
                    </div>

                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                      <div class="flex items-center gap-4">
                        <span class="text-3xl font-bold text-gray-900 dark:text-white">
                          {product.price}
                        </span>
                        <div class="flex flex-wrap gap-2">
                          {product.tags.slice(0, 2).map((tag) => (
                            <span class="inline-flex items-center rounded-md bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 text-xs font-medium text-indigo-700 dark:text-indigo-300">
                              {tag}
                            </span>
                          ))}
                        </div>
                      </div>

                      <a
                        href={product.gumroadUrl}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="inline-flex items-center gap-2 rounded-lg bg-indigo-600 px-6 py-3 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 transition-colors"
                      >
                        {product.price === 'Gratis'
                          ? 'Probar ahora'
                          : 'Comprar ahora'}
                        <svg
                          class="h-4 w-4"
                          fill="none"
                          stroke="currentColor"
                          viewBox="0 0 24 24"
                        >
                          <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                          />
                        </svg>
                      </a>
                    </div>
                  </div>

                  <div class="relative">
                    <div class="aspect-[4/3] w-full overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-700">
                      <Image
                        src={product.image}
                        alt={product.title}
                        class="h-full w-full object-cover object-center"
                        loading="lazy"
                        format="webp"
                        quality={85}
                        width={400}
                        height={300}
                        densities={[1, 2]}
                      />
                    </div>
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>

  <div class="mx-auto max-w-7xl px-6 lg:px-8 py-16 sm:py-24">
    <div class="mx-auto max-w-2xl lg:max-w-none text-center">
      <h2 class="text-3xl font-bold tracking-tight sm:text-4xl mb-10">
        Stack Tecnológico
      </h2>
      <Stack />
    </div>
  </div>

  <!-- CTA Section -->
  <div class="relative isolate">
    <div class="mx-auto max-w-7xl px-6 lg:px-8 py-16 sm:py-24">
      <div class="mx-auto max-w-2xl lg:max-w-4xl">
        <div
          class="relative overflow-hidden rounded-3xl bg-gradient-to-r from-indigo-500 via-indigo-600 to-purple-500 dark:from-indigo-600 dark:via-indigo-700 dark:to-purple-600"
        >
          <div
            class="absolute inset-0 bg-grid-white/10 [mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))]"
          >
          </div>
          <div class="relative px-8 py-16 md:px-12 md:py-20">
            <figure>
              <blockquote
                class="text-center text-xl font-semibold leading-8 text-white sm:text-2xl sm:leading-9"
              >
                <p class="mb-8">
                  ¿Necesitas ayuda para mejorar tu proyecto web o formar a tu
                  equipo técnico?
                </p>
                <p>
                  Agenda una consultoría gratuita y descubre cómo puedo ayudarte
                  a alcanzar tus objetivos.
                </p>
              </blockquote>
              <div
                class="mt-10 flex flex-col sm:flex-row items-center justify-center gap-4"
              >
                <button
                  data-cal-link="franmoreno/consultoria"
                  data-cal-config='{"layout":"month_view"}'
                  class="inline-flex items-center gap-2 rounded-full bg-white px-8 py-4 text-base font-semibold text-indigo-600 shadow-sm hover:bg-indigo-50 transition-colors duration-300"
                >
                  Agendar reunión gratuita
                  <svg
                    class="w-5 h-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                    ></path>
                  </svg>
                </button>
                <a
                  href="/servicios"
                  class="inline-flex items-center gap-2 rounded-full bg-indigo-400/20 backdrop-blur-sm px-8 py-4 text-base font-semibold text-white hover:bg-indigo-400/30 transition-colors duration-300"
                >
                  Ver servicios
                  <svg
                    class="w-5 h-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                  </svg>
                </a>
              </div>
            </figure>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>

<CalendarScript />
